<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="mayylu">



    <meta name="description" content="学习是一种生活态度">



<title>MYSQL语法 | mayylu&#39;s blog</title>



    <link rel="icon" href="/vue.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 5.4.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const currentTheme = window.localStorage && window.localStorage.getItem('theme') || '';
            const isDark = currentTheme === 'dark';
            const pagebody = document.getElementsByTagName('body')[0]
            if (isDark) {
                pagebody.classList.add('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Dark"
            } else {
                pagebody.classList.remove('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Light"
            }
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">mayylu&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/categories">Categories</a>
                
                    <a class="menu-item" href="/tags">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">mayylu&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/categories">Categories</a>
                
                    <a class="menu-item" href="/tags">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    var tocbot_timer;
    var DEPTH_MAX = 6; // 为 6 时展开所有
    var tocbot_default_config = {
        tocSelector: '.tocbot-list',
        contentSelector: '.post-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        orderedList: false,
        scrollSmooth: true,
        onClick: extend_click,
    };

    function extend_click() {
        clearTimeout(tocbot_timer);
        tocbot_timer = setTimeout(function() {
            tocbot.refresh(obj_merge(tocbot_default_config, {
                hasInnerContainers: true
            }));
        }, 420); // 这个值是由 tocbot 源码里定义的 scrollSmoothDuration 得来的
    }

    document.ready(function() {
        tocbot.init(obj_merge(tocbot_default_config, {
            collapseDepth: 1
        }));
    });

    function expand_toc() {
        var b = document.querySelector('.tocbot-toc-expand');
        var expanded = b.getAttribute('data-expanded');
        expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
        tocbot.refresh(obj_merge(tocbot_default_config, {
            collapseDepth: expanded ? 1 : DEPTH_MAX
        }));
        b.innerText = expanded ? 'Expand all' : 'Collapse all';
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

    function obj_merge(target, source) {
        for (var item in source) {
            if (source.hasOwnProperty(item)) {
                target[item] = source[item];
            }
        }
        return target;
    }
</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">MYSQL语法</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">mayylu</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">十一月 2, 2022&nbsp;&nbsp;</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/sql/">sql</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>MySQL所使用的 SQL 语言是用于访问数据库的最常用标准化语言,由于其体积小、速度快、总体拥有成本低，尤其是开放源码这一特点，一般中小型网站的开发都选择 MySQL 作为网站数据库。  </p>
<span id="more"></span>  
<h2 id="mysql的特点"><a href="#mysql的特点" class="headerlink" title="mysql的特点"></a>mysql的特点</h2><p><img src="https://cdn.jsdelivr.net/gh/mayylu/pic@main/blogs/20200331110731265.png" alt="20200331110731265"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> workPicPath <span class="keyword">from</span> smbms_user <span class="keyword">where</span> workPicPath <span class="operator">=</span><span class="string">&#x27;123  &#x27;</span> <span class="keyword">and</span> <span class="number">123</span><span class="operator">=</span><span class="string">&#x27;123a&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="operator">|</span> workPicPath <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">123</span>         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">1</span> warning (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="数据库基本信息"><a href="#数据库基本信息" class="headerlink" title="数据库基本信息"></a>数据库基本信息</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">user</span>, host <span class="keyword">FROM</span> mysql.user; <span class="comment">--用户信息查询</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">&#x27;log_error&#x27;</span>;</span><br><span class="line"><span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">&#x27;general_log_file&#x27;</span>;</span><br><span class="line"><span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">&#x27;slow_query_log_file&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> PROCESSLIST;  <span class="comment">-- 查看当前正在执行的MySQL进程</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--查看有没有开event_scheduler（事件调度器）</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@event</span>_scheduler;</span><br><span class="line"><span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">&#x27;event%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> TRIGGERS; <span class="comment">--查看所有计划任务（触发器）</span></span><br><span class="line"><span class="keyword">DROP</span> EVENT [IF <span class="keyword">EXISTS</span>] event_name  <span class="comment">--删除计划任务（触发器）</span></span><br></pre></td></tr></table></figure>


<h2 id="MySQL数据库管理语法"><a href="#MySQL数据库管理语法" class="headerlink" title="MySQL数据库管理语法"></a>MySQL数据库管理语法</h2><h3 id="数据库的连接"><a href="#数据库的连接" class="headerlink" title="数据库的连接"></a>数据库的连接</h3><h4 id="使用-PHP-脚本连接-MySQL服务"><a href="#使用-PHP-脚本连接-MySQL服务" class="headerlink" title="使用 PHP 脚本连接 MySQL服务"></a>使用 PHP 脚本<strong>连接</strong> MySQL服务</h4><p><code>mysqli_connect(host, username, password, dbname,port, socket);</code>   </p>
<h4 id="断开与MySQL数据库的链接"><a href="#断开与MySQL数据库的链接" class="headerlink" title="断开与MySQL数据库的链接"></a><strong>断开</strong>与MySQL数据库的链接</h4><p><code>mysqli_close ( connection )</code><br> 提示：通常不需要使用 mysqli_close()，因为已打开的非持久连接会在脚本执行完毕后自动关闭。   </p>
<h3 id="数据定义"><a href="#数据定义" class="headerlink" title="数据定义"></a>数据定义</h3><h4 id="创建-删除数据库-结果以query而定"><a href="#创建-删除数据库-结果以query而定" class="headerlink" title="创建,删除数据库(结果以query而定)"></a><strong>创建,删除</strong>数据库(结果以query而定)</h4><p>  <code>mysqli_query(connection,query,resultmode);</code><br>‘DROP DATABASE RUNOOB’<br>‘CREATE DATABASE RUNOOB’<br><img src="https://cdn.jsdelivr.net/gh/mayylu/pic@main/blogs/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20220122232819.png" alt="微信截图_20220122232819"><br>也可以使用mysqli_multi_query(connection,query)执行一条或多条sql语句，然后将结果全部输出。       </p>
<h4 id="选择MySQL数据库"><a href="#选择MySQL数据库" class="headerlink" title="选择MySQL数据库"></a><strong>选择</strong>MySQL数据库</h4><p><code>mysqli_select_db(connection,dbname);</code>  </p>
<h4 id="创建-删除数据表"><a href="#创建-删除数据表" class="headerlink" title="创建,删除数据表"></a><strong>创建,删除</strong>数据表</h4><p><code>mysqli_query(connection,query,resultmode);</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>(</span><br><span class="line">      <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>[ <span class="operator">&lt;</span>列级完整性约束条件<span class="operator">&gt;</span> ]</span><br><span class="line">      [，<span class="operator">&lt;</span>列名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>[ <span class="operator">&lt;</span>列级完整性约束条件<span class="operator">&gt;</span>] ]</span><br><span class="line">       ………</span><br><span class="line">      [，<span class="operator">&lt;</span>表级完整性约束条件<span class="operator">&gt;</span> ]</span><br><span class="line"> );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `runoob_tbl`(       </span><br><span class="line">    `runoob_id` <span class="type">INT</span> UNSIGNED AUTO_INCREMENT,     </span><br><span class="line">    `runoob_title` <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,    </span><br><span class="line">    `runoob_author` <span class="type">VARCHAR</span>(<span class="number">40</span>) <span class="keyword">NULL</span>,     </span><br><span class="line">    `submission_date` <span class="type">DATE</span>,      </span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (  `runoob_id` ), <span class="keyword">UNIQUE</span>(runoob_title)        </span><br><span class="line">    )ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;     </span><br></pre></td></tr></table></figure>
<p>数据类型<br><img src="https://cdn.jsdelivr.net/gh/mayylu/pic@main/blogs/20200331204116766.png" alt="20200331204116766"><br>约束条件<br><img src="https://cdn.jsdelivr.net/gh/mayylu/pic@main/blogs/QQ%E6%88%AA%E5%9B%BE20240116232033.png" alt="QQ截图20240116232033"></p>
<p>   查看列：<code>desc 表名;</code>或<code>describe 表名</code></p>
<p>   删除表: <code>DROP TABLE &lt;表名&gt;［RESTRICT| CASCADE］；</code><br>    RESTRICT：删除表是有限制的。<br>        欲删除的基本表不能被其他表的约束所引用(如视图等)<br>        如果存在依赖该表的对象，则此表不能被删除<br>    CASCADE：删除该表没有限制。<br>        在删除基本表的同时，相关的依赖对象一起删除</p>
<h4 id="添加，修改，删除表名，列名"><a href="#添加，修改，删除表名，列名" class="headerlink" title="添加，修改，删除表名，列名"></a><strong>添加，修改，删除</strong>表名，列名</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line">[ <span class="keyword">ADD</span> <span class="operator">&lt;</span>新列名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> [ 完整性约束 ] ]</span><br><span class="line">[ <span class="keyword">DROP</span> <span class="operator">&lt;</span>完整性约束名<span class="operator">&gt;</span> ]</span><br><span class="line">[ MODIFY <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>]</span><br><span class="line">[ <span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> ]</span><br><span class="line">[ RENAME <span class="keyword">to</span> <span class="operator">&lt;</span>新表名<span class="operator">&gt;</span> ]</span><br><span class="line">[ RENAME <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> <span class="keyword">to</span> <span class="operator">&lt;</span>新列名<span class="operator">&gt;</span> ]</span><br><span class="line">[ CHANGE <span class="keyword">column</span> <span class="operator">&lt;</span>旧列名<span class="operator">&gt;</span> <span class="operator">&lt;</span>新列名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>]</span><br><span class="line">    <span class="keyword">alter</span> <span class="keyword">table</span> table_name rename table_name1; <span class="comment">--修改表名</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">alter</span> <span class="keyword">table</span> table_name <span class="keyword">add</span>  column_name <span class="type">varchar</span>(<span class="number">10</span>); <span class="comment">--添加表列</span></span><br><span class="line">    <span class="keyword">alter</span> <span class="keyword">table</span> table_name <span class="keyword">add</span> name1 <span class="type">int</span>,<span class="keyword">add</span> name2 <span class="type">varchar</span>(<span class="number">11</span>);<span class="comment">--添加两个字段</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">alter</span> <span class="keyword">table</span> table_name <span class="keyword">drop</span>  column_name; <span class="comment">--删除表列</span></span><br><span class="line">    <span class="keyword">alter</span> <span class="keyword">table</span> table_name <span class="keyword">drop</span> column_name1,<span class="keyword">drop</span> column_name2;<span class="comment">--删除两个字段name1,name2</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">alter</span> <span class="keyword">table</span> table_name modify (<span class="keyword">NOT</span> <span class="keyword">NULL</span>) name <span class="type">char</span>(<span class="number">10</span>) <span class="comment">--修改表列类型 例:alter table interaction modify column rcontent longtext NULL;</span></span><br><span class="line">    <span class="keyword">alter</span> <span class="keyword">table</span> table_name change name address  <span class="type">char</span>(<span class="number">40</span>)<span class="comment">--修改列名</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">alter</span> <span class="keyword">table</span> table_name change  <span class="keyword">column</span> name name1 <span class="type">varchar</span>(<span class="number">30</span>)<span class="comment">--修改表列名address-&gt; address1</span></span><br></pre></td></tr></table></figure>
<h3 id="数据操纵"><a href="#数据操纵" class="headerlink" title="数据操纵"></a>数据操纵</h3><h4 id="insert-into-插入数据"><a href="#insert-into-插入数据" class="headerlink" title="insert into 插入数据"></a>insert into <strong>插入</strong>数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">INTO</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> (<span class="operator">&lt;</span>属性列<span class="number">1</span><span class="operator">&gt;</span>[，<span class="operator">&lt;</span>属性列<span class="number">2</span> <span class="operator">&gt;</span>…)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="operator">&lt;</span>常量<span class="number">1</span><span class="operator">&gt;</span> [，<span class="operator">&lt;</span>常量<span class="number">2</span><span class="operator">&gt;</span>]    …           )</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>如果常量是数字型可以不加引号,如果数据是字符型，必须使用<strong>单引号或者双引号</strong><br>   INSERT 插入多条数据<br>   <code>INSERT INTO table_name  (field1, field2,...fieldN)  VALUES  (valueA1,valueA2,...valueAN),(valueB1,valueB2,...valueBN),(valueC1,valueC2,...valueCN)......;</code></p>
<p>如果所有的列都要添加数据可以不规定列进行添加数据<br>insert 还可以还select配套使用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">INSERT</span> </span><br><span class="line">    <span class="keyword">INTO</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>  [(<span class="operator">&lt;</span>属性列<span class="number">1</span><span class="operator">&gt;</span> [，<span class="operator">&lt;</span>属性列<span class="number">2</span><span class="operator">&gt;</span>…  )]</span><br><span class="line">    子查询；</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span>  Dept_age(Sdept,Avg_age)</span><br><span class="line"><span class="keyword">SELECT</span>  Sdept,<span class="built_in">AVG</span>(Sage)</span><br><span class="line"><span class="keyword">FROM</span>  Student</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> Sdept;</span><br></pre></td></tr></table></figure>
<h5 id="REPLACE-INTO"><a href="#REPLACE-INTO" class="headerlink" title="REPLACE INTO"></a><strong>REPLACE INTO</strong></h5><p>REPLACE INTO在执行插入操作时，如果发现某个行与表格中已有的行具有相同的主键或唯一性字段，则会删除原有的行，并插入新记录。这种情况下不会报“重复键”错误，因为它相当于先执行了一条 DELETE 再执行 INSERT。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> REPLACE <span class="keyword">INTO</span> `score` (`username`,`listen`,`read`,`write`)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">values</span>(<span class="string">&#x27;mayylu&#x27;</span>,<span class="number">150</span>,<span class="number">200</span>,<span class="number">200</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="Update-set-修改数据"><a href="#Update-set-修改数据" class="headerlink" title="Update set 修改数据"></a>Update set <strong>修改</strong>数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UPDATE  <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SET</span>  <span class="operator">&lt;</span>列名<span class="operator">&gt;=</span><span class="operator">&lt;</span>表达式<span class="operator">&gt;</span>[，<span class="operator">&lt;</span>列名<span class="operator">&gt;=</span><span class="operator">&lt;</span>表达式<span class="operator">&gt;</span>]…</span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span>条件<span class="operator">&gt;</span>];</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">select</span> username,listen,`read`,`write` <span class="keyword">from</span> `score`;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------+------+-------+</span></span><br><span class="line"><span class="operator">|</span> username <span class="operator">|</span> listen <span class="operator">|</span> read <span class="operator">|</span> write <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------+------+-------+</span></span><br><span class="line"><span class="operator">|</span> 火华     <span class="operator">|</span>    <span class="number">100</span> <span class="operator">|</span>  <span class="number">201</span> <span class="operator">|</span>   <span class="number">212</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 火华     <span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span>  <span class="number">201</span> <span class="operator">|</span>   <span class="number">212</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------+------+-------+</span></span><br><span class="line"></span><br><span class="line">UPDATE `score` <span class="keyword">SET</span> `read`<span class="operator">=</span>REPLACE(`read`,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">2</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">2</span>  Changed: <span class="number">2</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> username,listen,`read`,`write` <span class="keyword">from</span> `score`;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------+------+-------+</span></span><br><span class="line"><span class="operator">|</span> username <span class="operator">|</span> listen <span class="operator">|</span> read <span class="operator">|</span> write <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------+------+-------+</span></span><br><span class="line"><span class="operator">|</span> 火华     <span class="operator">|</span>    <span class="number">100</span> <span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span>   <span class="number">212</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 火华     <span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span>   <span class="number">212</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------+------+-------+</span></span><br></pre></td></tr></table></figure>
<h4 id="DELETE-删除-数据"><a href="#DELETE-删除-数据" class="headerlink" title="DELETE 删除 数据"></a>DELETE <strong>删除</strong> 数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> </span><br><span class="line">[<span class="keyword">WHERE</span> 子句]</span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span> 子句]</span><br><span class="line">[LIMIT 子句]</span><br></pre></td></tr></table></figure>
<p> 删除数据 ：<code>delete from students where id=3;</code></p>
<h2 id="select-查询语法"><a href="#select-查询语法" class="headerlink" title="select 查询语法"></a>select 查询语法</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">ALL</span><span class="operator">|</span><span class="keyword">DISTINCT</span>]   </span><br><span class="line"><span class="operator">&lt;</span>目标列表达式<span class="operator">&gt;</span> [别名] [ ，<span class="operator">&lt;</span>目标列表达式<span class="operator">&gt;</span> [别名]] … </span><br><span class="line"><span class="keyword">FROM</span>   <span class="operator">&lt;</span>表名或视图名<span class="operator">&gt;</span> [别名]   [ ，<span class="operator">&lt;</span>表名或视图名<span class="operator">&gt;</span> [别名]] …</span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span>条件表达式<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">GROUP</span>  <span class="keyword">BY</span><span class="operator">&lt;</span>列名<span class="number">1</span><span class="operator">&gt;</span></span><br><span class="line">[<span class="keyword">HAVING</span>  <span class="operator">&lt;</span>条件表达式<span class="operator">&gt;</span>]]</span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="operator">&lt;</span>列名<span class="number">2</span><span class="operator">&gt;</span> [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>] </span><br><span class="line">[LIMIT N][ <span class="keyword">OFFSET</span> M]</span><br></pre></td></tr></table></figure>
<h3 id="在php中的使用"><a href="#在php中的使用" class="headerlink" title="在php中的使用"></a>在php中的使用</h3><p><strong>mysqli_fetch_array(result,resulttype);</strong> 函数从结果集中取得一行作为关联数组，或数字数组，或二者兼有。</p>
<p>   result         必需。规定由 mysqli_query()、mysqli_store_result() 或 mysqli_use_result() 返回的结果集标识符。<br>   resulttype     可选。规定应该产生哪种类型的数组。可以是以下值中的一个：<br>    MYSQLI_ASSOC<br>    MYSQLI_NUM<br>    MYSQLI_BOTH</p>
<h3 id="select简单的查询"><a href="#select简单的查询" class="headerlink" title="select简单的查询"></a>select简单的查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> Sno <span class="keyword">FROM</span> SC;</span><br></pre></td></tr></table></figure>
<p>如果没有指定DISTINCT关键词，则缺省为ALL,关键词DISTINCT可以去掉表中重复的行</p>
<h4 id="聚集函数"><a href="#聚集函数" class="headerlink" title="聚集函数"></a>聚集函数</h4><h4 id="as起别名"><a href="#as起别名" class="headerlink" title="as起别名"></a>as<strong>起别名</strong></h4><p>为数据表和字段<strong>起别名</strong></p>
<ul>
<li>“SELECT 字段名 AS 别名 FROM 数据表;”，可为字段指定别名；</li>
<li>“SELECT 字段名 FROM 数据表 AS 别名;”，可为表指定别名。</li>
</ul>
<p>通过as<strong>构建视图</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> REPLACE(username,<span class="string">&#x27;火&#x27;</span>,<span class="string">&#x27; - &#x27;</span>) <span class="keyword">as</span> username,listen,`read`,`write` <span class="keyword">from</span> `score`;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------+------+-------+</span></span><br><span class="line"><span class="operator">|</span> username <span class="operator">|</span> listen <span class="operator">|</span> read <span class="operator">|</span> write <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------+------+-------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="operator">-</span> 华    <span class="operator">|</span>    <span class="number">100</span> <span class="operator">|</span>  <span class="number">201</span> <span class="operator">|</span>   <span class="number">212</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="operator">-</span> 华    <span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span>  <span class="number">201</span> <span class="operator">|</span>   <span class="number">212</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------+------+-------+</span></span><br></pre></td></tr></table></figure>
<h3 id="有条件有限制的查询和输出"><a href="#有条件有限制的查询和输出" class="headerlink" title="有条件有限制的查询和输出"></a>有条件有限制的查询和输出</h3><h4 id="where子句"><a href="#where子句" class="headerlink" title="where子句"></a>where子句</h4><p>常用的查询条件<br><img src="https://cdn.jsdelivr.net/gh/mayylu/pic@main/blogs/125858.png" alt="125858"></p>
<p>嵌套查询常用的比较运算符<br><img src="https://cdn.jsdelivr.net/gh/mayylu/pic@main/blogs/QQ%E6%88%AA%E5%9B%BE20231028154756.png" alt="QQ截图20231028154756"></p>
<h5 id="LIKE-语法"><a href="#LIKE-语法" class="headerlink" title="LIKE 语法"></a>LIKE 语法</h5><p><code>[NOT] LIKE ‘&lt;匹配串&gt;’ [ESCAPE ‘ &lt;换码字符&gt;’]</code><br>如<code>WHERE  Sname LIKE &#39;欧阳_&#39;;</code><br>like 匹配/模糊匹配，会与 % 和 _ 结合使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(1)&#x27;_&#x27;表示任意单个字符</span><br><span class="line">(2)&#x27;%&#x27;表示任意数量的字符</span><br><span class="line">(3)如果想在A中匹配字符&#x27;_&#x27;和&#x27;%&#x27;或者&#x27;;&#x27;就需要转义。以&#x27;%&#x27;为例，即用&#x27;\%&#x27;(匹配一个%字符)。</span><br><span class="line"></span><br><span class="line">如</span><br><span class="line">where id=(1) || fl4g like binary 0x5f25   0x5f25对应的是%_I% ,即限制了查询数据的fl4g字段可以为任何数据</span><br><span class="line">where id=(1) || fl4g like binary 0x25544925   0x25544925对应的是%TI% ,即限制了查询数据的fl4g字段中必须包含TI</span><br><span class="line"></span><br><span class="line">like binary 区分大小写</span><br></pre></td></tr></table></figure>
<p>A(表名) <strong>rlike</strong> B (表达式) ，表示A里边只要含有B即可，B中一般放正则表达式。</p>
<p><strong>regexp 正则</strong><br>regexp与其用法相似，即A(表名) regexp B (表达式)。</p>
<p><code>SELECT name FROM person_tbl WHERE name REGEXP &#39; &#39;</code>  </p>
<p><img src="https://cdn.jsdelivr.net/gh/mayylu/pic@main/blogs/%E6%88%AA%E5%9B%BE_20220123180747.png" alt="截图_20220123180747">    </p>
<h5 id="多重条件查询"><a href="#多重条件查询" class="headerlink" title="多重条件查询"></a>多重条件查询</h5><p>逻辑运算符：</p>
<pre><code>and用 &amp;&amp; 代替
or用 || 代替 
xor用 | 代替 
not用 ! 代替 
AND和 OR来联结多个查询条件

优先级: NOT&gt;AND&gt;OR
可以用括号改变优先级
</code></pre>
<h5 id="EXISTS"><a href="#EXISTS" class="headerlink" title="EXISTS"></a>EXISTS</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span>(<span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">             <span class="keyword">FROM</span> SC</span><br><span class="line">              <span class="keyword">WHERE</span> Sno<span class="operator">=</span>Student.Sno </span><br><span class="line">   			<span class="keyword">AND</span> Cno<span class="operator">=</span> <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="ORDER-BY子句"><a href="#ORDER-BY子句" class="headerlink" title="ORDER BY子句"></a>ORDER BY子句</h4><p>MySQL ORDER BY 子句<strong>排序</strong><br><code>ORDER BY 关键字</code>用于对结果集按照一个列或者多个列进行排序。<br><code>ORDER BY 关键字</code>默认按照升序<code>[ASC]</code>对记录进行排序。如果需要按照降序对记录进行排序，您可以使用 <code>DESC</code> 关键字   </p>
<p>也可以使用<code>ORDER BY n</code>以“第n个字段”排序</p>
<h4 id="group-by-子句"><a href="#group-by-子句" class="headerlink" title="group by 子句"></a>group by 子句</h4><p><code>SELECT column1, column2 FROM table1, table2 WHERE [ conditions ] GROUP BY column1, column2 HAVING aggregate_function(column_name) operator value ORDER BY column1, column2</code> </p>
<ul>
<li><p>group by一般和聚合函数一起使用才有意义<br><code>select deptno,sum(sal) from emp group by  deptno;#按照deptno字段分组后再求和</code></p>
</li>
<li><p>在 SQL 中增加 HAVING 子句原因是，WHERE 关键字无法与聚合函数一起使用。<br>HAVING 子句可以让我们<strong>筛选</strong> <strong>组合后</strong>的各组数据。 </p>
</li>
<li><p>执行顺序<br>  1.执行where xx对全表数据做筛选，返回第1个结果集。<br>  2.针对第1个结果集使用group by组和，返回第2个结果集。<br>  3.针对第2个结果集中的每1组数据执行select xx，有几组就执行几次，返回第3个结果集。<br>  4.针对第3个结集执行having xx进行筛选，返回第4个结果集<br>如果没有groupby的select语句执行结果只有一条，分组后的执行结果可以是多个</p>
<h4 id="LIMIT"><a href="#LIMIT" class="headerlink" title="LIMIT"></a>LIMIT</h4><p>数据库应用常见功能之一就是分页，尤其是当数据量很大的时候，应用性能的高低，一定程度上和分页逻辑的效率紧密相关</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select* from test LIMIT 3 (提取前三条数据)</span><br><span class="line"></span><br><span class="line">如： select * from test limit 2,1; (从第二行的下取一行，即取：第3行数据)</span><br><span class="line"></span><br><span class="line">select * from test LIMIT 3 offset 2;(第二行的下一行开始向下取3条数据，即取：3，4，5行的三条数据)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="集合查询"><a href="#集合查询" class="headerlink" title="集合查询"></a>集合查询</h3><h4 id="并操作UNION"><a href="#并操作UNION" class="headerlink" title="并操作UNION"></a>并操作UNION</h4><p>MySQL UNION 操作符用于连接两个以上的 SELECT 语句的结果组合到一个结果集合中(联合查询，必须保证字段数一致)多个 SELECT 语句会删除重复的数据<br><strong>union all</strong>则只是简单地将两个结果集合并后就返回结果。因此，如果返回的两个结果集中有重复的数据，那么<strong>返回的结果就会包含重复的数据</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sdept<span class="operator">=</span> <span class="string">&#x27;CS&#x27;</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">       <span class="keyword">FROM</span> Student</span><br><span class="line">       <span class="keyword">WHERE</span> Sage<span class="operator">&lt;=</span><span class="number">19</span>;</span><br></pre></td></tr></table></figure>
<p>交操作INTERSECT<br>差操作EXCEPT</p>
<h3 id="join连接查询结果"><a href="#join连接查询结果" class="headerlink" title="join连接查询结果"></a>join连接查询结果</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table1<span class="operator">/</span><span class="operator">/</span>左表</span><br><span class="line"><span class="operator">&lt;</span>xxx <span class="keyword">JOIN</span><span class="operator">&gt;</span> table2<span class="operator">/</span><span class="operator">/</span>右表</span><br><span class="line"><span class="keyword">ON</span> table1.column_name<span class="operator">=</span>table2.column_name;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="MYSQL-常用函数"><a href="#MYSQL-常用函数" class="headerlink" title="MYSQL 常用函数"></a>MYSQL 常用函数</h2><h3 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h3><p>聚合函数的操作对象是列，一般只用输入单个指定的字段名即可，可以与group by 配合使用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">计数</span><br><span class="line">COUNT（[<span class="keyword">DISTINCT</span><span class="operator">|</span><span class="keyword">ALL</span>] <span class="operator">*</span>）</span><br><span class="line">COUNT（[<span class="keyword">DISTINCT</span><span class="operator">|</span><span class="keyword">ALL</span>] <span class="operator">&lt;</span>列名<span class="operator">&gt;</span>）</span><br><span class="line">计算总和</span><br><span class="line">SUM（[<span class="keyword">DISTINCT</span><span class="operator">|</span><span class="keyword">ALL</span>] <span class="operator">&lt;</span>列名<span class="operator">&gt;</span>）</span><br><span class="line">计算平均值</span><br><span class="line">AVG（[<span class="keyword">DISTINCT</span><span class="operator">|</span><span class="keyword">ALL</span>] <span class="operator">&lt;</span>列名<span class="operator">&gt;</span>）</span><br><span class="line">最大最小值</span><br><span class="line">MAX（[<span class="keyword">DISTINCT</span><span class="operator">|</span><span class="keyword">ALL</span>] <span class="operator">&lt;</span>列名<span class="operator">&gt;</span>）</span><br><span class="line">MIN（[<span class="keyword">DISTINCT</span><span class="operator">|</span><span class="keyword">ALL</span>] <span class="operator">&lt;</span>列名<span class="operator">&gt;</span>）</span><br><span class="line"><span class="comment">-- 字符串聚合函数  </span></span><br><span class="line">    #group_concat()                group_concat是针对列做的数据拼接，且group_concat自动生成逗号,一般和<span class="keyword">group</span> <span class="keyword">by</span> 结合使用比较多 (纵向)   </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="字符函数"><a href="#字符函数" class="headerlink" title="字符函数"></a>字符函数</h3><pre><code>LEN() -     返回某个文本字段的长度
ASCII(s)-                     返回字符串s的第一个字符或字符s的 ASCII 码 

left（a，b)-                  指从左侧读取a的前b位    
right(a,b)-                   指从右侧读取a的前b位
substr(string,start,length) - 字符串截取
substr(string from start for length) 
substring()、mid() 函数与substring()函数功能类似

replace(string,search,replace)把object对象中出现的的search全部替换成replace  

greatest(n1,n2,n3.....)返回输入参数的最大值；
least(n1,n2,n3....)返回输入参数的最小值
</code></pre>
<ul>
<li>字符串多参数函数<br>  #CONCAT(s1,s2…sn)            字符串 s1,s2 等多个字符串合并为一个字符串(横向)<br>  CONCAT_WS()     使用指定的字符将目标字符串进行拼接</li>
</ul>
<h3 id="数字函数"><a href="#数字函数" class="headerlink" title="数字函数"></a>数字函数</h3><pre><code>CEIL()         进一（向上）取整
FLOOR()     舍一（向下）取整
EXP(x)-     返回 e 的 x 次方计算
LN(x)         返回数字的自然对数，以 e 为底        
FLOOR(x)-   返回小于或等于 x 的最大整数 
ROUND() -   对某个数值字段进行指定小数位数的四舍五入       
RAND()         返回 0 到 1 的随机数 
FORMA(X,D)  将数字格式化为带有千位分隔符、小数点和指定位数的字符串 
ABS()     绝对值计算
</code></pre>
<h3 id="时间函数"><a href="#时间函数" class="headerlink" title="时间函数"></a>时间函数</h3><pre><code>NOW() -     返回当前的系统日期和时间
CURDATE()   则单独返回当前日
</code></pre>
<h3 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h3><pre><code>IF(expr,v1,v2)-               如果表达式 expr 成立，返回结果 v1；否则，返回结果 v2   
IFNULL(a,b)                   如果a不为null返回a，否则返回b；
benchmark(重复次数, 执行的函数) 用于测试函数或者表达式的执行速度。其运行返回值都是0，在表外显示时间。测试函数的
CASE WHEN a then b else c end        判断如果a为真返回b,为假返回c
</code></pre>
<h3 id="SQL-功能性函数"><a href="#SQL-功能性函数" class="headerlink" title="SQL 功能性函数"></a>SQL 功能性函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sleep()-    休眠几秒 </span><br><span class="line">SYSTEM_USER() 	返回当前用户 </span><br><span class="line">DATABASE() 	    返回当前数据库名     </span><br><span class="line">VERSION() 	    返回数据库的版本号   </span><br><span class="line">LOAD_FILE(file_name)           读取文件并返回文件内容为字符串   </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="mysql中的其他查询语法"><a href="#mysql中的其他查询语法" class="headerlink" title="mysql中的其他查询语法"></a>mysql中的其他查询语法</h3><p><strong>handler(句柄)</strong><br>handler语句并不具备select语句的所有功能。它是mysql专用的语句，并没有包含到SQL标准中。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># 打开一个表名为 tbl_name 的表的句柄</span><br><span class="line">HANDLER tbl_name OPEN [ AS 别名 ]</span><br><span class="line"></span><br><span class="line">可选：</span><br><span class="line"></span><br><span class="line">创建索引：</span><br><span class="line">mysql&gt; create index handler_index on handler_table(c1);</span><br><span class="line"></span><br><span class="line"># 1、通过指定索引查看表，可以指定从索引那一行开始，通过 NEXT 继续浏览</span><br><span class="line">HANDLER tbl_name READ index_name &#123; = | &lt;= | &gt;= | &lt; | &gt; &#125; (value1,value2,...)</span><br><span class="line">    [ WHERE where_condition ] [LIMIT ... ]</span><br><span class="line"></span><br><span class="line"># 2、通过索引查看表</span><br><span class="line"># FIRST: 获取第一行（索引最小的一行）</span><br><span class="line"># NEXT: 获取下一行</span><br><span class="line"># PREV: 获取上一行</span><br><span class="line"># LAST: 获取最后一行（索引最大的一行）</span><br><span class="line">HANDLER tbl_name READ index_name &#123; FIRST | NEXT | PREV | LAST &#125;</span><br><span class="line">    [ WHERE where_condition ] [LIMIT ... ]</span><br><span class="line"></span><br><span class="line"># 3、不通过索引查看表</span><br><span class="line"># READ FIRST: 获取句柄的第一行</span><br><span class="line"># READ NEXT: 依次获取其他行（当然也可以在获取句柄后直接使用获取第一行）</span><br><span class="line"># 最后一行执行之后再执行 READ NEXT 会返回一个空的结果</span><br><span class="line">HANDLER tbl_name READ &#123; FIRST | NEXT &#125;</span><br><span class="line">    [ WHERE where_condition ] [LIMIT ... ]</span><br><span class="line"></span><br><span class="line"># 关闭已打开的句柄</span><br><span class="line">HANDLER tbl_name CLOSE</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="MySQL其他扩展语法"><a href="#MySQL其他扩展语法" class="headerlink" title="MySQL其他扩展语法"></a>MySQL其他扩展语法</h2><h3 id="Mysql自带的预编译"><a href="#Mysql自带的预编译" class="headerlink" title="Mysql自带的预编译"></a>Mysql自带的预编译</h3><p>第一步：<br>    set @a=concat(‘sel’,’ect * from ?;’);在SQL中，‘@’通常用于表示变量。具体而言，‘@’后面跟着一个字符串，这个字符串就是一个变量名。<br>    将命令concat(‘sel’,’ect * from ?;’)赋给变量@a<br>    这里的命令即是连接sql语句，形成查表语句。</p>
<p>第二步：<br>    prepare stmt from @@a<br>    编译命令，将命令编译后命名为新的可执行文件stmt</p>
<p>第三步：<br>    set @tablename=’table_a’;<br>    EXECUTE stmt using @tablename;<br>    运行可执行文件stmt</p>
<h3 id="select-into-outfile-文件写入"><a href="#select-into-outfile-文件写入" class="headerlink" title="select into outfile 文件写入"></a>select into outfile 文件写入</h3><p>可以使用<code>select @@secure_file_priv</code>查看用户是否有权限<br>在MySQL中，‘@@’表示系统变量。<br>SELECT INTO…OUTFILE语句把表数据导出到一个文本文件中，并用LOAD DATA …INFILE语句恢复数据。但是这种方法只能导出或导入数据的内容，不包括表的结构，如果表的结构文件损坏，则必须先恢复原来的表的结构。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">Table</span> <span class="keyword">into</span> outfile <span class="string">&#x27;/路径/文件名&#x27;</span></span><br><span class="line">fields terminated <span class="keyword">by</span> <span class="string">&#x27;,&#x27;</span></span><br><span class="line">enclosed <span class="keyword">by</span> <span class="string">&#x27;&quot;&#x27;</span></span><br><span class="line">lines terminated <span class="keyword">by</span> <span class="string">&#x27;\r\n&#x27;</span></span><br></pre></td></tr></table></figure>
<p>路径目录必须有读写权限</p>
<h3 id="LOAD-DATA-INFILE语法"><a href="#LOAD-DATA-INFILE语法" class="headerlink" title="LOAD DATA INFILE语法"></a>LOAD DATA INFILE语法</h3><p>语法主要是用于读取一个文件的内容并且放到一个表中,文件可以是客户端也可以是服务端的</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">load data infile &quot;/data/data.csv&quot; <span class="keyword">into</span> <span class="keyword">table</span> TestTable; <span class="comment">--+和load_file类似</span></span><br><span class="line">load data <span class="keyword">local</span> infile &quot;/home/data.csv&quot; <span class="keyword">into</span> <span class="keyword">table</span> TestTable; <span class="comment">--+不受secure_file_priv限制，文件路径由客户端提供，但是需要设置local_infile=ON</span></span><br></pre></td></tr></table></figure>

<h2 id="mysql中的特殊库"><a href="#mysql中的特殊库" class="headerlink" title="mysql中的特殊库"></a>mysql中的特殊库</h2><h3 id="information-schema简介"><a href="#information-schema简介" class="headerlink" title="information_schema简介"></a>information_schema简介</h3><p><img src="https://cdn.jsdelivr.net/gh/mayylu/pic@main/blogs/QQ%E6%88%AA%E5%9B%BE2021131028154756.png" alt="QQ截图2021131028154756"></p>
<h3 id="sys库"><a href="#sys库" class="headerlink" title="sys库"></a>sys库</h3><p>mysql5.7增加sys系统数据库，这个库是通过视图的形式把information_schema和performance_schema结合起来<br><img src="https://cdn.jsdelivr.net/gh/mayylu/pic@main/blogs/QQ%E6%88%AA%E5%9B%BE201151556.png" alt="QQ截图201151556"></p>
<h3 id="performance-schema"><a href="#performance-schema" class="headerlink" title="performance_schema"></a>performance_schema</h3><p><img src="https://cdn.jsdelivr.net/gh/mayylu/pic@main/blogs/QQ%E6%88%AA%E5%9B%BE21111111256.png" alt="QQ截图21111111256"></p>

        </div>

        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/SQL/"># SQL</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2022/11/04/java/basis/java_Swing_GUI/">java_Swing_GUI</a>
            
            
            <a class="next" rel="next" href="/2022/09/27/php/php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/">php反序列化</a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>© mayylu | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>

</html>